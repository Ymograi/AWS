Link to this file is in the description below

## Exercise 1
##Configure the Default Apache Web Server
c;cd /;c
./e1;
hostname;c
hostname -I;c
getenforce;c
firewall-cmd --state;c
useradd user1; echo p | passwd --stdin user1; useradd user10; echo p | passwd --stdin user10; useradd user11;echo p | passwd --stdin user11;clear

yum install lynx elinks vim -y;c
yum group install "Basic Web server" -y;c
ps aux | grep http;c
systemctl status httpd;c
firewall-cmd --permanent --add-service={http,https};c
firewall-cmd --reload;c
systemctl enable httpd;c
systemctl start httpd;c
systemctl status httpd;c
ps aux | grep http;c
cd /var/www/html/;c
echo "Exercise 1 : This is my new website" > index.html;c
httpd -t;c
elinks http://server1.example.com

## Exercise 2
##Modify the Default Web Server to Use a Different Home Page and Hostname
cd /
./e2;
cd /var/www/html ;c
echo "This is webserver1 (exercise 2)" > index.html;c
echo "192.168.0.100 server1.example.com server1 webserver1.example.com webserver1" >> /etc/hosts;c
sed -ie 's/root@localhost/root@webserver1.example.com/g' /etc/httpd/conf/httpd.conf;c
echo "ServerName webserver1.example.com" >> /etc/httpd/conf/httpd.conf;c
httpd -t;c
elinks http://webserver1.example.com;c

## Exercise 3
## Extend the Web Server to Provide Access to a Private Directory
./e3;
mkdir /var/privusr;c
chown user1:user1 /var/privusr ; chmod 0711 /var/privusr;c
echo "Exercise 3:This is webserver1 providing user1 access to a private directory" > /var/privusr/index.html;c
semanage fcontext -at httpd_sys_content_t "/var/privusr(/.*)?";c
restorecon -Rv /var/privusr;c
sed -ie 's/^DocumentRoot/#DocumentRoor/g' /etc/httpd/conf/httpd.conf;
echo 'DocumentRoot "/var"' >> /etc/httpd/conf/httpd.conf;
echo "DocumentRoot "/var"
<Directory /var/privusr>
AllowOverride AuthConfig
</Directory>" >> /etc/httpd/conf/httpd.conf;c
httpd -t;c
echo "AuthType Basic
AuthName "\"Password-protected User Contents. Enter your credentials to log in:"\"
AuthUserFile "\"/etc/httpd/conf/.userdb"\"
Require user user1" > /var/privusr/.htaccess ;c
cd /etc/httpd/conf ; 
htpasswd -b -c ~/password user1 p;c
chgrp apache .userdb ; chmod 0640 .userdb;c
systemctl restart httpd;c
systemctl status httpd -l;c
elinks http://webserver1.example.com/privusr 

## Exercise 4
##Modify the Web Server to Provide Access to Group-Managed Contents
./e4;
mkdir /var/privgrp;c
groupadd dba ; usermod -G dba user10 ; usermod -G dba user11;c
chgrp dba /var/privgrp ; chmod 0771 /var/privgrp;c
echo "Exercise 4:This is webserver1 providing dba group members access to a directory." > /var/privgrp/index.html;c
semanage fcontext -at httpd_sys_content_t "/var/privgrp(/.*)?";c
restorecon -Rv /var/privgrp;c
echo "DocumentRoot "/var"
<Directory /var/privgrp>
AllowOverride AuthConfig
</Directory>" >> /etc/httpd/conf/httpd.conf;c
httpd -t;c
echo 'AuthType Basic
AuthName "Password-protected Group Contents. Enter your credentials to log in:"
AuthUserFile "/etc/httpd/conf/.grouppassworddb"
AuthGroupFile "/etc/httpd/conf/.groupdb"
Require group dba' > /var/privgrp/.htaccess;c
cd /etc/httpd/conf/
echo 'dba: user10 user11' > /etc/httpd/conf/.groupdb;c
chgrp apache .groupdb ; chmod 0640 .groupdb;c
htpasswd -b -c .grouppassworddb user10 p;c
htpasswd -b  .grouppassworddb user11 p;c
systemctl restart httpd;c
systemctl status httpd -l;c
http://webserver1.example.com/privgrp



## Exercise 5
##Modify the Web Server to Limit Access to Select Hosts on a Non-Default Port
./e5;
vim /etc/httpd/conf/httpd.conf

ServerAdmin root@webserver1.example.com
ServerName webserver1.example.com:8989
DocumentRoot “ /var”

<Directory /var/privusr>
AllowOverride AuthConfig
Require host example.com
Require ip 192.168.1.0/24
</Directory>

<Directory /var/privgrp>
AllowOverride AuthConfig
Require host example.com
Require ip 192.168.1.0/24
</Directory>

httpd –t;c

echo "Listen 8989" >> /etc/httpd/conf/httpd.conf;c

systemctl restart httpd;c
systemctl status httpd -l;c
firewall-cmd --permanent --add-port 8989/tcp ; firewall-cmd --reload;c
semanage port –at http_port_t –p tcp 8989;c
semanage port –l | grep ^http_port_t;c
http://webserver1.example.com:8989/privusr
http://webserver1.example.com:8989/privgrp





## Exercise 6
##Configure a Simple Virtual Host
./e6;
echo '<VirtualHost *:80>
ServerAdmin admin@vhost1.example.com
DocumentRoot /var/www/html/vhost1
ServerName vhost1.example.com
ErrorLog logs/vhost1-error_log
CustomLog logs/vhost1-access_log combined
</VirtualHost>' > /etc/httpd/conf.d/vhost1.conf;c

mkdir /var/www/html/vhost1;c
echo "Excercise 6: his web page is to test virtual host" > /var/www/html/vhost1/index.html;c
httpd -D DUMP_VHOSTS;c
sed -ie 's/^192.168.0.100/#/g' /etc/hosts;c
echo "192.168.0.100 server1.example.com server1 webserver1.example.com webserver1 vhost1.example.com vhost1" >> /etc/hosts;c
systemctl restart httpd;c
systemctl status httpd -l;c
elinks http://vhost1.example.com;c



## Exercise 7
##Generate a Key Pair and Self-Signed Certificate
./e7;
yum -y install mod_ssl openssl nmap;c
cd /etc/pki/tls/certs;c
openssl genpkey -algorithm rsa -pkeyopt rsa_keygen_bits:2048 -out server1.example.com.key;c
openssl req -new -key server1.example.com.key -out server1.example.com.csr;c
openssl x509 -req -days 120 -signkey server1.example.com.key -in server1.example.com.csr -out server1.example.com.crt;c
chmod 0600 server1.example.com.key ; mv server1.example.com.key ../private;c
systemctl restart httpd;c
systemctl status httpd -l;c
nmap localhost;c
openssl s_client -connect localhost:443 -state;c




## Exercise 8
##Configure a Secure Virtual Host
./e8;
mkdir /var/www/html/secure
echo '<VirtualHost *:443>
DocumentRoot “ /var/www/html/secure”
ServerName server1.example.com:443
SSLCertificateFile /etc/pki/tls/certs/server1.example.com.crt
SSLCertificateKeyFile /etc/pki/tls/private/server1.example.com.key
</VirtualHost>' >> /etc/httpd/conf.d/ssl.conf;c

httpd -D DUMP_VHOSTS;c
echo "Exercise 8 :This web page is to test a more complex virtual host " >> /var/www/html/secure/index.html;c
restorecon -Rv /var/www/html;c
firewall-cmd --permanent --add-service=https ; firewall-cmd --reload;c
systemctl restart httpd;c
systemctl status httpd -l;c
elinks https://server1.example.com



echo -e "$(tput bold) reg  bld  und   tput-command-colors$(tput sgr0)"

#! /bin/bash
clear
printf "\n"
echo -e "$(tput bold) Exercise 1: Configure the Default Apache Web Server $(tput sgr0)"
sleep 3
clear
#! /bin/bash
clear
printf "\n"
echo -e "$(tput bold) Exercise 2: Modify the Default Web Server to Use a Different Home Page and Hostname$(tput sgr0)"
sleep 3
clear
#! /bin/bash
clear
printf "\n"
echo -e "$(tput bold) Exercise 3:Extend the Web Server to Provide Access to a Private Directory$(tput sgr0)"
sleep 3
clear
#! /bin/bash
clear
printf "\n"
echo -e "$(tput bold) Exercise 4: Modify the Web Server to Provide Access to Group-Managed Contents$(tput sgr0)"
sleep 3
clear
#! /bin/bash
clear
printf "\n"
echo -e "$(tput bold) Exercise 5: Modify the Web Server to Limit Access to Select Hosts on a Non-Default Port $(tput sgr0)"
sleep 3
clear
#! /bin/bash
clear
printf "\n"
echo -e "$(tput bold) Exercise 6: Configure a Simple Virtual Host $(tput sgr0)"
sleep 3
clear
#! /bin/bash
clear
printf "\n"
echo -e "$(tput bold) Exercise 7: Generate a Key Pair and Self-Signed Certificate $(tput sgr0)"
sleep 3
clear
#! /bin/bash
clear
printf "\n"
echo -e "$(tput bold) Exercise 8: Configure a Secure Virtual Host $(tput sgr0)"
sleep 3
clear
#! /bin/bash
clear
printf "\n"
echo -e "$(tput bold) Exercise $(tput sgr0)"
sleep 3
clear


 
